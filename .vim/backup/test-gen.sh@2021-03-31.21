#!/bin/bash

_usage() {
cat <<-EOF
                "${0##*/}"
################################################################################

@author    Marco Israel (MI)
@date      2001
@brief     Geberate a certificate test folder and run the creation script.


  USAGE:
 "${0##*/} <testName>

 @example
 "${0##*/} 1.2.3.4_myRequirement

################################################################################
# END OF HELP.
EOF
}



_gen_readme() {
cat <<-EOF > "$1"/README
TEST
"$1"
--------------------------------------------------------------------------------
REQUIRED SCOPE:

1.
TODO

2.
TODO

--------------------------------------------------------------------------------
TESTLIST:

1.
* TODO


--------------------------------------------------------------------------------
EXPACT:

1.
* TODO


--------------------------------------------------------------------------------
RESULT:

1.
* TODO


--- EOF ------------------------------------------------------------------------
EOF
}



### MAIN #######################################################################

if [ "$#" -eq 1 ]
then
    NAME="$1"

    cp -r cnf "$NAME"

    _gen_readme "$NAME"

    ./create-certificates.sh "$NAME" 1> /tmp/tmp.log 2>&1

    mv ./output "$NAME"/
    mv /tmp/tmp.log "$NAME"/output/compiler.log

    git add "$NAME"
    git commit -m "ADD INIT TEST ""[Â§NAME]"

else
    _usage
fi

### EOF ########################################################################
