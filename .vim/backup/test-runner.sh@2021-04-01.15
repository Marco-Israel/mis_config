#!/bin/bash

_usage() {
cat <<-EOF
                "${0##*/}"
################################################################################

@author    Marco Israel (MI)
@date      2001
@brief     Geberate a certificate test folder and run the creation script.


  USAGE:
 "${0##*/} <testName>

 @example
 "${0##*/} 1.2.3.4_myRequirement

################################################################################
# END OF HELP.
EOF
}



_gen_readme() {
cat <<-EOF > "$1/$2"/README
TEST
"$1"
--------------------------------------------------------------------------------
REQUIRED SCOPE:

1.
TODO the kind to test out of the required text part.


--------------------------------------------------------------------------------
TESTLIST:

1_TODO_test_name
TODO Test description. E.g. what is the test defining in configuration files.


--------------------------------------------------------------------------------
1_TODO_test_name

EXPACT:
TODO what result is expacted. E.g. the Result mentiond out in manuals

RESULT
TRUE or FALSE
TODO in case of FALSE (result not equivalent to the expactation) a result
description. In case of TRUE no further explanation is needed.


--- EOF ------------------------------------------------------------------------
EOF
}



### MAIN #######################################################################

if [ "$#" -eq  2 ]
then
    NAME="$1"

    if [ ! -d $NAME ]
    then
    echo "NEW REQUIRED"
        _gen_readme "$NAME"
    fi

    if [ ! -d $NAME/$2 ]
    then
        echo "NEW TESTCASE"
        cp -r cnf "$NAME/$2"
        git checkout cnf
    fi

     ./create-certificates.sh "$NAME/$2" 1> /tmp/tmp.log 2>&1

     mv ./output "$NAME/$2/"
     mv /tmp/tmp.log "$NAME/$2/"output/compiler.log

     vim "$NAME/README"
     git add "$NAME"
     git commit "$NAME" -m "ADD INIT TEST [Â§NAME]"

else
    _usage
fi

### EOF ########################################################################
